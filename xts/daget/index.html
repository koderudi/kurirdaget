<!DOCTYPE html><html><head><meta charset="utf-8"><title>Daget Mini App - Debug</title><script src="https://telegram.org/js/telegram-web-app.js"></script><style> body { font-family: sans-serif; padding: 20px; background: var(--tg-theme-bg-color, #fff); color: var(--tg-theme-text-color, #000); } .info { background: var(--tg-theme-secondary-bg-color, #f0f0f0); padding: 15px; border-radius: 8px; margin: 20px 0; word-break: break-all; } button { background: var(--tg-theme-button-color, #40a7e3); color: var(--tg-theme-button-text-color, #fff); border: none; padding: 15px 20px; border-radius: 8px; font-size: 18px; width: 100%; cursor: pointer; margin-top: 10px; } .log { margin-top: 20px; background: #1e1e1e; color: #00ff00; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; } .warning { color: #ff9900; background: #332200; padding: 10px; border-radius: 5px; margin-top: 10px; } </style></head><body><h3>üêû Debug Mode (Menggunakan Hash)</h3><div class="info"><strong>üìå Kode dari URL (tgWebAppStartParam):</strong><span id="codeDisplay" style="font-weight:bold;">(mengambil...)</span></div><button id="sendBtn" style="display:none;">üì§ Kirim Kode ke Bot</button><div class="log" id="log"></div><div id="warning" class="warning" style="display:none;"></div><script> (function() { const tg = window.Telegram?.WebApp; const logDiv = document.getElementById('log'); const codeDisplay = document.getElementById('codeDisplay'); const sendBtn = document.getElementById('sendBtn'); const warningDiv = document.getElementById('warning'); function addLog(message) { console.log(message); logDiv.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`; } function showWarning(msg) { warningDiv.style.display = 'block'; warningDiv.innerText = msg; } try { if (!tg) { throw new Error('Tidak di lingkungan Telegram WebApp'); } tg.expand(); addLog('‚úÖ Telegram WebApp siap'); addLog(`üìç URL lengkap: ${window.location.href}`); addLog(`üìç Pathname: ${window.location.pathname}`); addLog(`üìç Search: ${window.location.search}`); addLog(`üìç Hash: ${window.location.hash}`); const hash = window.location.hash.slice(1); if (!hash) { showWarning('Tidak ada hash! Pastikan Mini App dibuka dari Telegram dengan parameter startapp.'); addLog('‚ö†Ô∏è Hash kosong'); } else { const hashParams = new URLSearchParams(hash); addLog('üìã Parameter di hash:'); for (let [key, value] of hashParams.entries()) { if (key === 'tgWebAppData') { addLog(` ${key}: [data terenkripsi, panjang ${value.length}]`); } else { addLog(` ${key}: ${value}`); } } let customCode = hashParams.get('tgWebAppStartParam'); addLog(`üîë tgWebAppStartParam: ${customCode || '(tidak ada)'}`); if (customCode) { codeDisplay.textContent = customCode; sendBtn.style.display = 'block'; } else { codeDisplay.textContent = 'üö´ TIDAK ADA KODE'; showWarning('Tidak ada parameter tgWebAppStartParam di hash. Pastikan link menggunakan ?startapp=KODE'); } } sendBtn.addEventListener('click', () => { const codeToSend = codeDisplay.textContent; if (!codeToSend || codeToSend.includes('üö´')) { tg.showPopup({ title: 'Gagal', message: 'Tidak ada kode valid untuk dikirim', buttons: [{ type: 'ok' }] }); return; } addLog(`üì§ Mengirim kode: "${codeToSend}" ke bot...`); try { tg.sendData(codeToSend); addLog('‚úÖ tg.sendData() berhasil dipanggil'); tg.showPopup({ title: 'Berhasil', message: `Kode "${codeToSend}" terkirim!`, buttons: [{ type: 'ok' }] }, () => { addLog('ü™ü Popup ditutup'); }); } catch (err) { addLog(`‚ùå Error kirim: ${err.message}`); tg.showPopup({ title: 'Error', message: err.message }); } }); } catch (error) { addLog(`‚ùå FATAL: ${error.message}`); if (tg) { tg.showPopup({ title: 'Fatal Error', message: error.message }); } else { alert('Error: ' + error.message); } } })(); </script></body></html>

